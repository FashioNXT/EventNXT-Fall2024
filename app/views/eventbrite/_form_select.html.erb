<%# Dropdown for selecting an Eventbrite event %>
<%= form_with url: event_path(@event), method: :get, local: true do |f| %>
  <%= f.label :eventbrite_event, "Select an Eventbrite Event" %>
  <%= 
    f.select :eventbrite_event_id, options_for_select(
      @external_events.map { |e| [e['name'], e['id']] }, params[:eventbrite_event_id]), 
      include_blank: "Select Event" 
  %>
  <%= f.submit "Show Ticket Sales" %>
<% end %>

<%# Ticket Sales Table %>
<% if @ticket_sales.present? %>
  <h3>Ticket Sales</h3>
  <table>
    <thead>
      <tr>
        <th>Email</th>
        <th>Category</th>
        <th>Section</th>
        <th>Tickets</th>
        <th>Cost</th>
      </tr>
    </thead>
    <tbody>
      <% @ticket_sales.each do |ticket_sale| %>
        <tr>
          <td><%= ticket_sale[:email] %></td>
          <td><%= ticket_sale[:category]%></td>
          <td><%= ticket_sale[:section]%></td>
          <td><%= ticket_sale[:tickets]%></td>
          <td><%= number_to_currency(ticket_sale[:cost]) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>